# assault_cube_reverse_engineer
오픈소스 FPS, 어설트큐브를 기반한 공격 기법 구현 및 방어 기술 구현

# 트레이너 동작 영상
https://www.youtube.com/watch?v=nxIXzoWR1-I&ab_channel=AndrewLee


| 구분          | 요약 내용                                                            |
| ----------- | ---------------------------------------------------------------- |
| **프로젝트 목표** | AssaultCube 내 HP 및 무기 탄약을 실시간으로 고정하는 메모리 조작 트레이너 개발              |
| **주소 탐색**   | 모듈 베이스 주소와 포인터 체인을 활용해 동적 메모리 주소를 정확히 추적                         |
| **리버싱 활용**  | Cheat Engine 및 어셈블리 분석으로 CPU 레지스터와 명령어를 해석해 실제 데이터 저장 위치 역추적     |
| **메모리 조작**  | `WriteProcessMemory` API로 대상 프로세스 메모리에 직접 접근, 값 변경으로 게임 상태 제어    |
| **지속성 확보**  | 별도 스레드에서 주기적으로 메모리 주소를 재탐색하고 값을 갱신해, 게임 재시작이나 리스폰 상황에서도 안정 동작 유지 |
| **주요 성과**   | 복잡한 포인터 체인 구조를 정확히 파악하고, SR 탄약 문제 해결 포함 전무후무한 안정적 트레이너 완성        |



## 1. 프로젝트 개요

AssaultCube 게임에서 플레이어의 체력(HP)과 탄약(SMG, AR, SR)을 실시간으로 변경하는 **트레이너 프로그램**을 개발했습니다.

트레이너는 게임 내 변수 값을 메모리에서 찾아 직접 조작하여 게임 플레이에 영향을 주는 방식입니다.

---

## 2. 핵심 작업: 메모리 내 HP와 탄약 값 위치 찾기 (리버싱)

- 게임 내 값들은 단순히 한 주소에 저장된 것이 아니라,
- **포인터 체인(pointer chain)** 형태로 여러 단계의 메모리 주소를 거쳐 최종 데이터가 저장됨을 발견
- 따라서 Cheat Engine 툴을 사용해, 값이 바뀔 때마다 메모리를 반복적으로 스캔하며 변화하는 주소를 추적
- 포인터 오프셋(offset) 값들을 차례로 찾아,
- CPU 레지스터 및 어셈블리 명령어(예: `dec [eax]`)를 분석하여 실제 탄약 감소와 관련된 메모리 주소임을 확인


<img width="901" height="574" alt="image" src="https://github.com/user-attachments/assets/a016e002-68b1-4405-87b6-fe11c61cdb69" />


## 3. 어려웠던 점

- **포인터 체인의 깊이와 복잡성**: HP, SMG, AR, SR 각각 다른 길이와 단계의 오프셋 체인을 가지고 있어, 일일이 모든 단계를 파악하고 검증하는 데 시간과 노력이 많이 소요됨
- **SR 탄약값**이 다른 무기들과 달리 정상적으로 읽히지 않는 문제 발생 → 다시 깊게 리버싱하고 오프셋을 정확히 찾아내야 했음
- 어셈블리 레벨에서 메모리 접근 명령어(`mov`, `dec`, `lea` 등)를 해석하고,
    
    메모리 주소가 실제 탄약 감소와 직접 연관되는지를 역추적하는 과정이 복잡하고 까다로웠음
    
- 값이 헥사(16진수)로 표현되고, 직접 변경 시 게임이 튕기는 문제 해결

최초 2만건의 포인트 스캐너를 73개로 압축 > Offset이 적은것을 우선적으로 value값 변경하며 핵심 키 값 검증.

<img width="1018" height="918" alt="image" src="https://github.com/user-attachments/assets/ec0239bf-f51b-4413-8fec-1e062fb688f9" />

## 4. 성공적으로 구현한 점

- HP와 SMG, AR, SR 탄약값 모두 **동적으로 변화하는 메모리 주소를 포인터 체인으로 탐색**하여 정확한 위치를 찾음
- 각 변수별 포인터 오프셋과 모듈 베이스 주소를 이용해 최종 메모리 주소를 계산하는 `FindDMAAddy()` 함수 작성
- `WriteProcessMemory()`를 활용해 메모리 값을 999로 고정시키는 트레이너 루프 완성
- 동적 메모리 주소 변경에도 대응할 수 있도록 포인터 체인 탐색 구조로 구현하여, 게임을 다시 실행해도 정상 작동 보장
- SR 탄약의 문제를 해결하기 위해 정확한 포인터 체인을 재탐색, 이를 반영하여 모든 무기 탄약 값을 안정적으로 고정 가능하게 함
- 실행 시 디버깅 로그를 출력해 단계별 메모리 주소를 추적하고, 문제 발생 시 신속히 원인 분석 가능


## 5. 요약 및 느낀 점

이번 작업은 단순한 값 변경을 넘어 **게임 내부 메모리 구조를 분석하고 역추적하는 리버싱 작업의 실전 경험**이었습니다.
처음엔 복잡하고 까다로운 메모리 포인터 체인 때문에 많이 어려웠지만, 정확한 오프셋과 구조를 찾고 코드를 안정화하면서 점점 
자신감을 얻었고, 결과적으로 완벽하게 동작하는 트레이너를 완성할 수 있었습니다.

이 경험을 통해 **메모리 구조에 대한 이해**, **포인터 연산과 어셈블리 분석 능력**, 
그리고 **디버깅과 테스트의 중요성**을 깊게 깨달았습니다.

앞으로도 이런 리버싱 기반 게임 보안·트레이너 개발 역량을 꾸준히 키워나갈 계획입니다.

<img width="860" height="470" alt="image" src="https://github.com/user-attachments/assets/2200f595-bb5c-41b2-be95-692d1cbeb757" />


## 6. 추후 개발 일정
현재 메모리변조를 통한 플레이어 status 값 지속 갱신 중인 로직
메모리변조 감지 시스템 및 자동 밴처리 기획 중...
